<!--
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  üìÑ FILE: cart.ejs (TRANG GI·ªé H√ÄNG - SHOPPING CART)                         ‚ïë
‚ïü‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ï¢
‚ïë  üéØ M·ª§C ƒê√çCH: Qu·∫£n l√Ω gi·ªè h√†ng - xem v√† thanh to√°n c√°c kh√≥a h·ªçc             ‚ïë
‚ïë  üëÄ AI D√ôNG: Students ƒë√£ ƒëƒÉng nh·∫≠p                                          ‚ïë
‚ïë  üí° GHI CH√ö: Trang n√†y c√≥ th·ªÉ kh√¥ng d√πng n·ªØa (courses hi·ªán l√† FREE/PRO)     ‚ïë
‚ïü‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ï¢
‚ïë  üîå API CALLS (Front-end g·ªçi Backend):                                       ‚ïë
‚ïë     ‚úÖ GET /api/cart ‚Üí L·∫•y items trong gi·ªè h√†ng                            ‚ïë
‚ïë     ‚úÖ DELETE /api/cart/${itemId} ‚Üí X√≥a item kh·ªèi gi·ªè h√†ng                 ‚ïë
‚ïë     ‚úÖ POST /api/orders ‚Üí T·∫°o order m·ªõi khi checkout                       ‚ïë
‚ïü‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ï¢
‚ïë  üìã CH·ª®C NƒÇNG CH√çNH:                                                         ‚ïë
‚ïë     ‚úÖ Hi·ªÉn th·ªã danh s√°ch kh√≥a h·ªçc trong gi·ªè h√†ng                           ‚ïë
‚ïë     ‚úÖ Hi·ªÉn th·ªã gi√° t·ª´ng kh√≥a h·ªçc                                           ‚ïë
‚ïë     ‚úÖ T√≠nh t·ªïng ti·ªÅn (subtotal, tax, total)                                ‚ïë
‚ïë     ‚úÖ N√∫t x√≥a item kh·ªèi gi·ªè h√†ng                                           ‚ïë
‚ïë     ‚úÖ N√∫t "Proceed to Checkout" ‚Üí chuy·ªÉn ƒë·∫øn payment                       ‚ïë
‚ïë     ‚úÖ Empty cart state (khi gi·ªè h√†ng tr·ªëng)                                ‚ïë
‚ïü‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ï¢
‚ïë  üí° GI·∫¢I TH√çCH CHO TR·∫∫ 5 TU·ªîI:                                              ‚ïë
‚ïë     Trang n√†y gi·ªëng nh∆∞ GI·ªé H√ÄNG ·ªû SI√äU TH·ªä üõí                              ‚ïë
‚ïë     - Xem c√°c kh√≥a h·ªçc b·∫°n mu·ªën mua                                        ‚ïë
‚ïë     - X√≥a kh√≥a h·ªçc kh√¥ng th√≠ch n·ªØa (Remove button)                         ‚ïë
‚ïë     - Xem t·ªïng c·ªông ph·∫£i tr·∫£ bao nhi√™u ti·ªÅn                                ‚ïë
‚ïë     - Nh·∫•n "Checkout" ƒë·ªÉ ƒëi thanh to√°n                                     ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
-->
<!-- üìù Khai b√°o trang HTML5 - B·∫£o ƒë·∫£m tr√¨nh duy·ªát hi·ªÉu ƒë√¢y l√† trang web hi·ªán ƒë·∫°i -->
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- üìù B·∫£ng m√£ UTF-8: Gi√∫p hi·ªÉn th·ªã ƒë√∫ng ch·ªØ Vi·ªát, emoji, k√Ω t·ª± ƒë·∫∑c bi·ªát -->
    <meta charset="UTF-8">

    <!-- üì± Viewport: L√†m cho trang web responsive (ƒë·∫πp tr√™n ƒëi·ªán tho·∫°i v√† m√°y t√≠nh) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- üìå Ti√™u ƒë·ªÅ trang web hi·ªÉn th·ªã tr√™n tab tr√¨nh duy·ªát -->
    <title>Shopping Cart - UniLearn</title>

    <!-- üé® Tailwind CSS: Framework CSS gi√∫p vi·∫øt CSS nhanh (bg-white, text-center, p-6 v.v.) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- üé® Google Fonts: T·∫£i font ch·ªØ "Poppins" t·ª´ Google (gi√∫p ch·ªØ ƒë·∫πp h∆°n) -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- üé≠ Font Awesome: Th∆∞ vi·ªán icon (fa-shopping-cart, fa-trash, fa-lock v.v.) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- üé® CSS T√ôY CH·ªàNH: Vi·∫øt CSS tr·ª±c ti·∫øp b√™n trong tag <style> -->
    <style>
        /* üìù √Åp d·ª•ng font Poppins cho to√†n b·ªô trang v√† set m√†u n·ªÅn nh·∫°t */
        body { 
            font-family: 'Poppins', sans-serif; /* Font ch·ªØ Poppins */
            background-color: #f5f7fa; /* M√†u n·ªÅn: x√°m nh·∫°t */
        }

        /* üé¨ ANIMATION: Khi hover v√†o item gi·ªè h√†ng th√¨ tr∆∞·ª£t sang ph·∫£i 5px */
        .cart-item { 
            transition: all 0.3s ease; /* Chuy·ªÉn ƒë·ªông m∆∞·ª£t trong 0.3 gi√¢y */
        }
        .cart-item:hover { 
            transform: translateX(5px); /* Khi hover: tr∆∞·ª£t ph·∫£i 5px */
        }

        /* üé¨ ANIMATION: N√∫t x√≥a ph√≥ng to l√™n 1.1 l·∫ßn khi hover */
        .remove-btn:hover { 
            transform: scale(1.1); /* Ph√≥ng to 10% khi hover */
        }
    </style>

    <!-- üåë Dark Mode: T·∫£i script ƒë·ªÉ b·∫≠t/t·∫Øt ch·∫ø ƒë·ªô t·ªëi -->
    <script src="/js/darkmode.js"></script>

    <!-- ‚öôÔ∏è C·∫•u h√¨nh Tailwind: B·∫≠t ch·∫ø ƒë·ªô dark khi c√≥ class="dark" tr√™n <html> -->
    <script>
        tailwind.config = {
            darkMode: 'class' /* 'class' = d√πng class ƒë·ªÉ toggle dark mode */
        }
    </script>

    <!-- üé® CSS cho ch·∫ø ƒë·ªô t·ªëi: Th√™m m√†u s·∫Øc cho dark mode -->
    <link rel="stylesheet" href="/css/darkmode-improved.css">
</head>
<body class="transition-colors duration-300 bg-gray-50 dark:bg-gray-900">
        <%- include('../partials/header') %>

    <div class="min-h-screen flex flex-col">
        <main class="flex-grow container mx-auto py-8 px-4 md:px-6">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800 dark:text-gray-200">Shopping Cart</h1>
                <p class="text-gray-600 dark:text-gray-400 mt-2">Review your courses before checkout</p>
            </div>

            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Cart Items Section -->
                <div class="lg:w-2/3">
                    <!-- Empty Cart State -->
                    <div id="empty-cart" class="hidden bg-white dark:bg-gray-800 rounded-lg shadow-md p-12 text-center">
                        <i class="fas fa-shopping-cart text-6xl text-gray-300 dark:text-gray-600 mb-4"></i>
                        <h2 class="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-2">Your cart is empty</h2>
                        <p class="text-gray-500 dark:text-gray-400 mb-6">Start adding courses to your cart!</p>
                        <a href="/courses" class="inline-block bg-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-indigo-700 transition duration-200">
                            Browse Courses
                        </a>
                    </div>

                    <!-- Cart Items List -->
                    <div id="cart-items" class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                        <h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200 border-b pb-2">
                            <span id="cart-count-display">0</span> Course(s) in Cart
                        </h2>
                        <div id="cart-items-container" class="space-y-4">
                            <!-- Cart items will be dynamically inserted here -->
                        </div>
                    </div>
                </div>

                <!-- Order Summary Section -->
                <div class="lg:w-1/3">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 sticky top-24">
                        <h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200 border-b pb-2">Order Summary</h2>

                        <div class="space-y-3 mb-6">
                            <div class="flex justify-between text-gray-600 dark:text-gray-400">
                                <span>Subtotal:</span>
                                <span id="subtotal">$0.00</span>
                            </div>
                            <div class="flex justify-between text-gray-600 dark:text-gray-400">
                                <span>Tax (0%):</span>
                                <span>$0.00</span>
                            </div>
                            <div class="border-t pt-3 flex justify-between font-semibold text-xl text-gray-800 dark:text-gray-200">
                                <span>Total:</span>
                                <span id="total">$0.00</span>
                            </div>
                        </div>

                        <button id="checkout-btn" class="w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-indigo-700 transition duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-lock mr-2"></i>
                            Proceed to Checkout <!-- button -->
                        </button>

                        <div class="mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                            <h3 class="font-semibold text-sm text-gray-800 dark:text-gray-200 mb-2">
                                <i class="fas fa-info-circle text-blue-600 mr-2"></i>Why Choose UniLearn?
                            </h3>
                            <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
                                <li><i class="fas fa-check text-green-500 mr-2"></i>Lifetime access</li>
                                <li><i class="fas fa-check text-green-500 mr-2"></i>Certificate of completion</li>
                                <li><i class="fas fa-check text-green-500 mr-2"></i>30-day money-back guarantee</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <%- include('../partials/footer') %>

    <script>
        // Cart functionality
        let cart = [];

        // Load cart from localStorage
        function loadCart() {
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
            }
            renderCart();
            updateSummary();
        }

        // Save cart to localStorage
        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // Render cart items
        function renderCart() {
            const container = document.getElementById('cart-items-container');
            const emptyCart = document.getElementById('empty-cart');
            const cartItems = document.getElementById('cart-items');
            const checkoutBtn = document.getElementById('checkout-btn');

            if (cart.length === 0) {
                emptyCart.classList.remove('hidden');
                cartItems.classList.add('hidden');
                checkoutBtn.disabled = true;
            } else {
                emptyCart.classList.add('hidden');
                cartItems.classList.remove('hidden');
                checkoutBtn.disabled = false;

                container.innerHTML = cart.map((item, index) => `
<!-- üé® Body Tag: Ph·∫ßn body c·ªßa HTML v·ªõi transition color smooth cho dark mode -->
<!-- class="transition-colors duration-300" = Chuy·ªÉn ƒë·ªïi m√†u m∆∞·ª£t trong 0.3 gi√¢y -->
<!-- "bg-gray-50" = M√†u n·ªÅn x√°m nh·∫°t ·ªü ch·∫ø ƒë·ªô s√°ng -->
<!-- "dark:bg-gray-900" = M√†u n·ªÅn x√°m ƒëen ·ªü ch·∫ø ƒë·ªô t·ªëi -->
<body class="transition-colors duration-300 bg-gray-50 dark:bg-gray-900">
        <!-- üìå INCLUDE HEADER: Nh√∫ng file header.ejs (ch·ª©a navbar, logo, menu v.v.) -->
        <%- include('../partials/header') %>

    <!-- üéØ CONTAINER CH√çNH: Flex container v·ªõi chi·ªÅu cao t·ªëi thi·ªÉu l√† to√†n m√†n h√¨nh -->
    <!-- "min-h-screen" = Cao t·ªëi thi·ªÉu 100% viewport height (to√†n m√†n h√¨nh) -->
    <!-- "flex flex-col" = X·∫øp n·ªôi dung theo chi·ªÅu d·ªçc -->
    <div class="min-h-screen flex flex-col">
        <!-- üìÑ MAIN CONTENT: Ph·∫ßn n·ªôi dung ch√≠nh c·ªßa trang -->
        <!-- "flex-grow" = L·∫•p ƒë·∫ßy kh√¥ng gian c√≤n l·∫°i (ƒë·∫©y footer xu·ªëng d∆∞·ªõi c√πng) -->
        <!-- "container" = ƒê·ªô r·ªông t·ªëi ƒëa theo breakpoint c·ªßa Tailwind (1024px v.v.) -->
        <!-- "mx-auto" = Canh gi·ªØa theo chi·ªÅu ngang (auto margin tr√°i ph·∫£i) -->
        <!-- "py-8" = Padding tr√™n d∆∞·ªõi 2rem (32px) -->
        <!-- "px-4 md:px-6" = Padding tr√°i ph·∫£i 1rem (4px), t·ª´ tablet tr·ªü l√™n l√† 1.5rem (24px) -->
        <main class="flex-grow container mx-auto py-8 px-4 md:px-6">
            <!-- üéØ TI√äU ƒê·ªÄ TRANG: Ph·∫ßn ƒë·∫ßu trang v·ªõi ti√™u ƒë·ªÅ l·ªõn -->
            <!-- "text-center" = Canh gi·ªØa text -->
            <!-- "mb-8" = Margin d∆∞·ªõi 2rem (32px) -->
            <div class="text-center mb-8">
                <!-- üìù Ti√™u ƒë·ªÅ ch√≠nh "Shopping Cart" -->
                <!-- "text-3xl" = Font size l·ªõn (1.875rem / 30px) -->
                <!-- "font-bold" = Font weight bold (700) -->
                <!-- "text-gray-800" = M√†u x√°m ƒë·∫≠m ·ªü ch·∫ø ƒë·ªô s√°ng -->
                <!-- "dark:text-gray-200" = M√†u x√°m nh·∫°t ·ªü ch·∫ø ƒë·ªô t·ªëi -->
                <h1 class="text-3xl font-bold text-gray-800 dark:text-gray-200">Shopping Cart</h1>

                <!-- üìù Ti√™u ƒë·ªÅ ph·ª• "Review your courses before checkout" -->
                <!-- "text-gray-600" = M√†u x√°m nh·∫°t ·ªü ch·∫ø ƒë·ªô s√°ng -->
                <!-- "dark:text-gray-400" = M√†u x√°m t·ªëi h∆°n ·ªü ch·∫ø ƒë·ªô t·ªëi -->
                <!-- "mt-2" = Margin tr√™n 0.5rem (8px) -->
                <p class="text-gray-600 dark:text-gray-400 mt-2">Review your courses before checkout</p>
            </div>

            <!-- üéØ LAYOUT 2 C·ªòT: Gi·ªè h√†ng ·ªü tr√°i (2/3 width), t·ªïng ti·ªÅn ·ªü ph·∫£i (1/3 width) -->
            <!-- "flex flex-col" = X·∫øp th·∫≥ng ƒë·ª©ng tr√™n ƒëi·ªán tho·∫°i -->
            <!-- "lg:flex-row" = X·∫øp ngang tr√™n desktop (breakpoint large) -->
            <!-- "gap-8" = Kho·∫£ng c√°ch gi·ªØa 2 c·ªôt: 2rem (32px) -->
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- üì¶ GI·ªé H√ÄNG (LEFT COLUMN): Ph·∫ßn danh s√°ch kh√≥a h·ªçc -->
                <!-- "lg:w-2/3" = Tr√™n desktop: chi·∫øm 2/3 chi·ªÅu r·ªông -->
                <div class="lg:w-2/3">
                    <!-- üõí TR·∫†NG TH√ÅI GI·ªé TR·ªêNG: Hi·ªÉn th·ªã khi gi·ªè h√†ng kh√¥ng c√≥ g√¨ -->
                    <!-- id="empty-cart" = ID ƒë·ªÉ JavaScript thao t√°c -->
                    <!-- "hidden" = ·∫®n m·∫∑c ƒë·ªãnh (JavaScript s·∫Ω hi·ªÉn th·ªã khi c·∫ßn) -->
                    <!-- "bg-white" = N·ªÅn tr·∫Øng ·ªü ch·∫ø ƒë·ªô s√°ng -->
                    <!-- "dark:bg-gray-800" = N·ªÅn x√°m t·ªëi ·ªü ch·∫ø ƒë·ªô t·ªëi -->
                    <!-- "rounded-lg" = G√≥c bo tr√≤n (border-radius) -->
                    <!-- "shadow-md" = B√≥ng ƒë·ªï v·ª´a ph·∫£i -->
                    <!-- "p-12" = Padding 3rem (48px) trong -->
                    <!-- "text-center" = Canh gi·ªØa text -->
                    <div id="empty-cart" class="hidden bg-white dark:bg-gray-800 rounded-lg shadow-md p-12 text-center">
                        <!-- üõí ICON GI·ªé H√ÄNG: Icon Font Awesome to 6xl (60px) -->
                        <!-- "fas fa-shopping-cart" = Icon gi·ªè h√†ng -->
                        <!-- "text-6xl" = Font size 3.75rem (60px) -->
                        <!-- "text-gray-300" = M√†u x√°m nh·∫°t -->
                        <!-- "dark:text-gray-600" = M√†u x√°m t·ªëi ·ªü dark mode -->
                        <!-- "mb-4" = Margin d∆∞·ªõi 1rem (16px) -->
                        <i class="fas fa-shopping-cart text-6xl text-gray-300 dark:text-gray-600 mb-4"></i>

                        <!-- üìù Text "Your cart is empty" -->
                        <!-- "text-2xl" = Font size 1.5rem (24px) -->
                        <!-- "font-semibold" = Font weight 600 (n·ª≠a ƒë·∫≠m) -->
                        <!-- "text-gray-700" = M√†u x√°m -->
                        <!-- "dark:text-gray-300" = M√†u x√°m nh·∫°t ·ªü dark mode -->
                        <!-- "mb-2" = Margin d∆∞·ªõi 0.5rem (8px) -->
                        <h2 class="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-2">Your cart is empty</h2>

                        <!-- üìù Text h∆∞·ªõng d·∫´n -->
                        <!-- "text-gray-500" = M√†u x√°m nh·∫°t h∆°n -->
                        <!-- "dark:text-gray-400" = M√†u x√°m t·ªëi h∆°n ·ªü dark mode -->
                        <!-- "mb-6" = Margin d∆∞·ªõi 1.5rem (24px) -->
                        <p class="text-gray-500 dark:text-gray-400 mb-6">Start adding courses to your cart!</p>

                        <!-- üîó N√öT "Browse Courses": Link ƒë·ªÉ quay v·ªÅ trang kh√≥a h·ªçc -->
                        <!-- "inline-block" = N√∫t hi·ªÉn th·ªã nh∆∞ block nh∆∞ng ch·ªâ chi·∫øm kh√¥ng gian c·∫ßn thi·∫øt -->
                        <!-- "bg-indigo-600" = N·ªÅn xanh t√≠m -->
                        <!-- "text-white" = Ch·ªØ tr·∫Øng -->
                        <!-- "px-6 py-3" = Padding tr√°i ph·∫£i 1.5rem (24px), tr√™n d∆∞·ªõi 0.75rem (12px) -->
                        <!-- "rounded-lg" = G√≥c bo tr√≤n -->
                        <!-- "font-medium" = Font weight 500 -->
                        <!-- "hover:bg-indigo-700" = N·ªÅn xanh ƒë·∫≠m h∆°n khi hover -->
                        <!-- "transition duration-200" = Animation m∆∞·ª£t trong 0.2 gi√¢y -->
                        <a href="/courses" class="inline-block bg-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-indigo-700 transition duration-200">
                            Browse Courses
                        </a>
                    </div>

                    <!-- üì¶ DANH S√ÅCH KH√ìA H·ªåC TRONG GI·ªé: Container ch·ª©a c√°c item trong gi·ªè -->
                    <!-- id="cart-items" = ID ƒë·ªÉ JavaScript thao t√°c -->
                    <!-- "bg-white" = N·ªÅn tr·∫Øng -->
                    <!-- "dark:bg-gray-800" = N·ªÅn x√°m t·ªëi ·ªü dark mode -->
                    <!-- "rounded-lg" = G√≥c bo tr√≤n -->
                    <!-- "shadow-md" = B√≥ng ƒë·ªï v·ª´a ph·∫£i -->
                    <!-- "p-6" = Padding 1.5rem (24px) -->
                    <div id="cart-items" class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                        <!-- üéì TI√äU ƒê·ªÄ: S·ªë l∆∞·ª£ng kh√≥a h·ªçc trong gi·ªè -->
                        <!-- "text-xl" = Font size 1.25rem (20px) -->
                        <!-- "font-semibold" = Font weight 600 -->
                        <!-- "mb-4" = Margin d∆∞·ªõi 1rem (16px) -->
                        <!-- "text-gray-800" = M√†u x√°m ƒë·∫≠m -->
                        <!-- "dark:text-gray-200" = M√†u x√°m nh·∫°t ·ªü dark mode -->
                        <!-- "border-b pb-2" = Vi·ªÅn d∆∞·ªõi v√† padding d∆∞·ªõi 0.5rem (8px) -->
                        <h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200 border-b pb-2">
                            <!-- üî¢ SPAN: Hi·ªÉn th·ªã s·ªë l∆∞·ª£ng kh√≥a h·ªçc (c·∫≠p nh·∫≠t b·ªüi JavaScript) -->
                            <!-- id="cart-count-display" = ID ƒë·ªÉ JavaScript c·∫≠p nh·∫≠t s·ªë -->
                            <span id="cart-count-display">0</span> Course(s) in Cart
                        </h2>

                        <!-- üìã CONTAINER: Ch·ª©a danh s√°ch c√°c item trong gi·ªè -->
                        <!-- id="cart-items-container" = ID ƒë·ªÉ JavaScript nh√∫ng danh s√°ch -->
                        <!-- "space-y-4" = Kho·∫£ng c√°ch gi·ªØa c√°c item: 1rem (16px) -->
                        <div id="cart-items-container" class="space-y-4">
                            <!-- üí° Ch√∫ th√≠ch: Danh s√°ch c√°c item s·∫Ω ƒë∆∞·ª£c JavaScript t·∫°o ƒë·ªông ·ªü ƒë√¢y -->
                        </div>
                    </div>
                </div>

                <!-- üí∞ T√ìM T·∫ÆT ƒê∆†N H√ÄNG (RIGHT COLUMN): Ph·∫ßn t√≠nh t·ªïng ti·ªÅn -->
                <!-- "lg:w-1/3" = Tr√™n desktop: chi·∫øm 1/3 chi·ªÅu r·ªông -->
                <div class="lg:w-1/3">
                    <!-- üìä TH·∫∫ T√ìM T·∫ÆT: Hi·ªÉn th·ªã subtotal, tax, total -->
                    <!-- "bg-white" = N·ªÅn tr·∫Øng -->
                    <!-- "dark:bg-gray-800" = N·ªÅn x√°m t·ªëi ·ªü dark mode -->
                    <!-- "rounded-lg" = G√≥c bo tr√≤n -->
                    <!-- "shadow-md" = B√≥ng ƒë·ªï -->
                    <!-- "p-6" = Padding 1.5rem (24px) -->
                    <!-- "sticky top-24" = C·ªë ƒë·ªãnh ·ªü v·ªã tr√≠ d∆∞·ªõi header (top 6rem / 96px) khi cu·ªôn -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 sticky top-24">
                        <!-- üìù TI√äU ƒê·ªÄ: "Order Summary" -->
                        <!-- "text-xl" = Font size 20px -->
                        <!-- "font-semibold" = Font weight 600 -->
                        <!-- "mb-4" = Margin d∆∞·ªõi 16px -->
                        <!-- "text-gray-800" = M√†u x√°m ƒë·∫≠m -->
                        <!-- "dark:text-gray-200" = M√†u x√°m nh·∫°t ·ªü dark mode -->
                        <!-- "border-b pb-2" = Vi·ªÅn d∆∞·ªõi, padding d∆∞·ªõi 8px -->
                        <h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200 border-b pb-2">Order Summary</h2>

                        <!-- üí∞ DANH S√ÅCH T√çNH TO√ÅN: Subtotal, Tax, Total -->
                        <!-- "space-y-3" = Kho·∫£ng c√°ch gi·ªØa c√°c d√≤ng: 0.75rem (12px) -->
                        <!-- "mb-6" = Margin d∆∞·ªõi 1.5rem (24px) -->
                        <div class="space-y-3 mb-6">
                            <!-- üìä D√íNG 1: Subtotal (t·ªïng gi√° kh√≥a h·ªçc) -->
                            <!-- "flex justify-between" = X·∫øp 2 item ƒë·ªëi di·ªán nhau: tr√°i-ph·∫£i -->
                            <!-- "text-gray-600" = M√†u x√°m nh·∫°t -->
                            <!-- "dark:text-gray-400" = M√†u x√°m t·ªëi ·ªü dark mode -->
                            <div class="flex justify-between text-gray-600 dark:text-gray-400">
                                <!-- Label "Subtotal:" -->
                                <span>Subtotal:</span>

                                <!-- Hi·ªÉn th·ªã gi√° tr·ªã Subtotal (c·∫≠p nh·∫≠t b·ªüi JavaScript) -->
                                <!-- id="subtotal" = ID ƒë·ªÉ JavaScript c·∫≠p nh·∫≠t gi√° tr·ªã -->
                                <span id="subtotal">$0.00</span>
                            </div>

                            <!-- üìä D√íNG 2: Tax (thu·∫ø - hi·ªán t·∫°i l√† 0%) -->
                            <div class="flex justify-between text-gray-600 dark:text-gray-400">
                                <!-- Label "Tax (0%):" -->
                                <span>Tax (0%):</span>

                                <!-- Hi·ªÉn th·ªã thu·∫ø (hi·ªán t·∫°i lu√¥n l√† $0.00) -->
                                <span>$0.00</span>
                            </div>

                            <!-- üìä D√íNG 3: TOTAL (t·ªïng c·ªông ph·∫£i thanh to√°n) - IN ƒê·∫¨M -->
                            <!-- "border-t pt-3" = Vi·ªÅn tr√™n, padding tr√™n 0.75rem (12px) -->
                            <!-- "font-semibold text-xl" = Font ƒë·∫≠m, size 20px -->
                            <!-- "text-gray-800" = M√†u x√°m ƒë·∫≠m -->
                            <!-- "dark:text-gray-200" = M√†u x√°m nh·∫°t ·ªü dark mode -->
                            <div class="border-t pt-3 flex justify-between font-semibold text-xl text-gray-800 dark:text-gray-200">
                                <!-- Label "Total:" -->
                                <span>Total:</span>

                                <!-- Hi·ªÉn th·ªã t·ªïng ti·ªÅn c·∫ßn thanh to√°n -->
                                <!-- id="total" = ID ƒë·ªÉ JavaScript c·∫≠p nh·∫≠t -->
                                <span id="total">$0.00</span>
                            </div>
                        </div>

                        <!-- üîó N√öT "PROCEED TO CHECKOUT": N√∫t ch√≠nh ƒë·ªÉ thanh to√°n -->
                        <!-- id="checkout-btn" = ID ƒë·ªÉ JavaScript thao t√°c -->
                        <!-- "w-full" = Chi·ªÅu r·ªông 100% (l·∫•p ƒë·∫ßy container) -->
                        <!-- "bg-indigo-600" = N·ªÅn xanh t√≠m -->
                        <!-- "text-white" = Ch·ªØ tr·∫Øng -->
                        <!-- "py-3 px-4" = Padding tr√™n d∆∞·ªõi 0.75rem, tr√°i ph·∫£i 1rem -->
                        <!-- "rounded-lg" = G√≥c bo tr√≤n -->
                        <!-- "font-medium" = Font weight 500 -->
                        <!-- "hover:bg-indigo-700" = N·ªÅn xanh ƒë·∫≠m h∆°n khi hover -->
                        <!-- "transition duration-200" = Animation m∆∞·ª£t trong 0.2 gi√¢y -->
                        <!-- "flex items-center justify-center" = X·∫øp icon+text gi·ªØa -->
                        <!-- "disabled:opacity-50" = ƒê·ªô m·ªù 50% khi button b·ªã disable -->
                        <!-- "disabled:cursor-not-allowed" = Con tr·ªè th√†nh "kh√¥ng ƒë∆∞·ª£c ph√©p" khi disable -->
                        <!-- "disabled" = M·∫∑c ƒë·ªãnh button b·ªã disable (cho t·ªõi khi c√≥ item trong gi·ªè) -->
                        <button id="checkout-btn" class="w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-indigo-700 transition duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <!-- üîí ICON KH√ìA: Icon Font Awesome -->
                            <!-- "fas fa-lock" = Icon kh√≥a -->
                            <!-- "mr-2" = Margin b√™n ph·∫£i 0.5rem (8px) ƒë·ªÉ c√°ch text -->
                            <i class="fas fa-lock mr-2"></i>
                            <!-- üìù Text n√∫t: "Proceed to Checkout" -->
                            Proceed to Checkout
                        </button>

                        <!-- ‚ÑπÔ∏è TH√îNG TIN TH√äM: T·∫°i sao ch·ªçn UniLearn -->
                        <!-- "mt-6" = Margin tr√™n 1.5rem (24px) -->
                        <!-- "p-4" = Padding 1rem (16px) -->
                        <!-- "bg-blue-50" = N·ªÅn xanh nh·∫°t -->
                        <!-- "dark:bg-blue-900/20" = N·ªÅn xanh ƒë·∫≠m 20% ·ªü dark mode -->
                        <!-- "rounded-lg" = G√≥c bo tr√≤n -->
                        <div class="mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                            <!-- üìù TI√äU ƒê·ªÄ TH·ªé TH√äM -->
                            <!-- "font-semibold text-sm" = Font n·ª≠a ƒë·∫≠m, size nh·ªè -->
                            <!-- "text-gray-800" = M√†u x√°m ƒë·∫≠m -->
                            <!-- "dark:text-gray-200" = M√†u x√°m nh·∫°t ·ªü dark mode -->
                            <!-- "mb-2" = Margin d∆∞·ªõi 0.5rem (8px) -->
                            <h3 class="font-semibold text-sm text-gray-800 dark:text-gray-200 mb-2">
                                <!-- üìò ICON TH√îNG TIN: Icon Font Awesome -->
                                <!-- "fas fa-info-circle" = Icon i tr√≤n (th√¥ng tin) -->
                                <!-- "text-blue-600" = M√†u xanh -->
                                <!-- "mr-2" = Margin b√™n ph·∫£i 0.5rem -->
                                <i class="fas fa-info-circle text-blue-600 mr-2"></i>Why Choose UniLearn?
                            </h3>

                            <!-- üìã DANH S√ÅCH L·ª¢I √çCH -->
                            <!-- "text-sm" = Font size nh·ªè -->
                            <!-- "text-gray-600" = M√†u x√°m nh·∫°t -->
                            <!-- "dark:text-gray-400" = M√†u x√°m t·ªëi ·ªü dark mode -->
                            <!-- "space-y-1" = Kho·∫£ng c√°ch gi·ªØa items: 0.25rem (4px) -->
                            <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
                                <!-- ‚úÖ L·ª£i √≠ch 1: Lifetime access -->
                                <!-- "fas fa-check" = Icon d·∫•u t√≠ch -->
                                <!-- "text-green-500" = M√†u xanh l√° -->
                                <!-- "mr-2" = Margin b√™n ph·∫£i -->
                                <li><i class="fas fa-check text-green-500 mr-2"></i>Lifetime access</li>

                                <!-- ‚úÖ L·ª£i √≠ch 2: Certificate of completion -->
                                <li><i class="fas fa-check text-green-500 mr-2"></i>Certificate of completion</li>

                                <!-- ‚úÖ L·ª£i √≠ch 3: 30-day money-back guarantee -->
                                <li><i class="fas fa-check text-green-500 mr-2"></i>30-day money-back guarantee</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- üìå INCLUDE FOOTER: Nh√∫ng file footer.ejs -->
    <%- include('../partials/footer') %>

    <!-- üéØ SCRIPT JAVASCRIPT: Logic x·ª≠ l√Ω gi·ªè h√†ng -->
    <script>
        <!-- üìù BI·∫æN TO√ÄN C·ª§C: L∆∞u danh s√°ch kh√≥a h·ªçc trong gi·ªè h√†ng -->
        let cart = [];

        <!-- üì• H√ÄM: Load gi·ªè h√†ng t·ª´ localStorage (b·ªô nh·ªõ tr√¨nh duy·ªát) -->
        function loadCart() {
            <!-- üíæ L·∫•y gi·ªè h√†ng t·ª´ localStorage b·∫±ng key 'cart' -->
            const savedCart = localStorage.getItem('cart');

            <!-- üîÑ N·∫øu c√≥ d·ªØ li·ªáu l∆∞u: chuy·ªÉn t·ª´ JSON sang object JavaScript -->
            if (savedCart) {
                cart = JSON.parse(savedCart); <!-- JSON.parse = chuy·ªÉn string th√†nh object -->
            }

            <!-- üé® C·∫≠p nh·∫≠t giao di·ªán: hi·ªÉn th·ªã items, t√≠nh to√°n t·ªïng ti·ªÅn -->
            renderCart();
            updateSummary();
        }

        <!-- üíæ H√ÄM: L∆∞u gi·ªè h√†ng v√†o localStorage (ƒë·ªÉ kh√¥ng m·∫•t khi t·∫Øt tr√¨nh duy·ªát) -->
        function saveCart() {
            <!-- üíæ Chuy·ªÉn object JavaScript sang JSON string r·ªìi l∆∞u v√†o localStorage -->
            localStorage.setItem('cart', JSON.stringify(cart)); <!-- JSON.stringify = chuy·ªÉn object th√†nh string -->
        }

        <!-- üé® H√ÄM: Hi·ªÉn th·ªã danh s√°ch kh√≥a h·ªçc trong gi·ªè l√™n HTML -->
        function renderCart() {
            <!-- üéØ L·∫•y c√°c element HTML theo ID -->
            const container = document.getElementById('cart-items-container'); <!-- Container ch·ª©a danh s√°ch -->
            const emptyCart = document.getElementById('empty-cart'); <!-- Th√¥ng b√°o gi·ªè tr·ªëng -->
            const cartItems = document.getElementById('cart-items'); <!-- Container gi·ªè h√†ng -->
            const checkoutBtn = document.getElementById('checkout-btn'); <!-- N√∫t checkout -->

            <!-- üîç KI·ªÇM TRA: Gi·ªè h√†ng c√≥ tr·ªëng kh√¥ng? -->
            if (cart.length === 0) {
                <!-- üõí Gi·ªè tr·ªëng: Hi·ªÉn th·ªã th√¥ng b√°o -->
                emptyCart.classList.remove('hidden'); <!-- Lo·∫°i b·ªè class 'hidden' ƒë·ªÉ hi·ªÉn th·ªã -->
                cartItems.classList.add('hidden'); <!-- Th√™m class 'hidden' ƒë·ªÉ ·∫©n danh s√°ch -->
                checkoutBtn.disabled = true; <!-- Disable n√∫t checkout -->
            } else {
                <!-- üõí Gi·ªè c√≥ item: Hi·ªÉn th·ªã danh s√°ch -->
                emptyCart.classList.add('hidden'); <!-- ·∫®n th√¥ng b√°o gi·ªè tr·ªëng -->
                cartItems.classList.remove('hidden'); <!-- Hi·ªÉn th·ªã danh s√°ch -->
                checkoutBtn.disabled = false; <!-- K√≠ch ho·∫°t n√∫t checkout -->

                <!-- üìã RENDER: T·∫°o HTML cho t·ª´ng item trong gi·ªè -->
                <!-- cart.map = duy·ªát qua t·ª´ng item, (item, index) = item + v·ªã tr√≠ trong m·∫£ng -->
                container.innerHTML = cart.map((item, index) => `
                    <!-- üõçÔ∏è CARD ITEM: Container cho m·ªói kh√≥a h·ªçc trong gi·ªè -->
                    <!-- "flex items-center gap-4" = X·∫øp theo h√†ng ngang, kho·∫£ng c√°ch 16px -->
                    <!-- "p-4" = Padding 16px -->
                    <!-- "border border-gray-200" = Vi·ªÅn x√°m -->
                    <!-- "dark:border-gray-700" = Vi·ªÅn x√°m t·ªëi ·ªü dark mode -->
                    <!-- "rounded-lg" = G√≥c bo tr√≤n -->
                    <div class="cart-item flex items-center gap-4 p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                        <!-- üñºÔ∏è H√åNH ·∫¢NH PLACEHOLDER: H√¨nh ch·ªØ nh·∫≠t gradient thay v√¨ ·∫£nh -->
                        <!-- "flex-shrink-0" = Kh√¥ng co l·∫°i khi flex space nh·ªè -->
                        <!-- "w-24 h-24" = Chi·ªÅu r·ªông + cao 6rem (96px) = h√¨nh vu√¥ng -->
                        <!-- "bg-gradient-to-br" = Background gradient t·ª´ top-left t·ªõi bottom-right -->
                        <!-- "from-indigo-500 to-purple-600" = M√†u: xanh t√≠m -> t√≠m ƒë·∫≠m -->
                        <!-- "rounded-lg" = G√≥c bo tr√≤n -->
                        <!-- "flex items-center justify-center" = Canh gi·ªØa icon -->
                        <div class="flex-shrink-0 w-24 h-24 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                            <!-- üéì ICON KH√ìA H·ªåC: Icon Font Awesome -->
                            <!-- "fas fa-${item.icon || 'book'}" = Icon theo ki·ªÉu kh√≥a h·ªçc (ho·∫∑c default 'book') -->
                            <!-- "text-white" = M√†u tr·∫Øng -->
                            <!-- "text-3xl" = Font size 30px -->
                            <i class="fas fa-${item.icon || 'book'} text-white text-3xl"></i>
                        </div>

                        <!-- üìù TH√îNG TIN KH√ìA H·ªåC: T√™n, danh m·ª•c, rating -->
                        <!-- "flex-grow" = L·∫•p ƒë·∫ßy kh√¥ng gian c√≤n l·∫°i -->
                        <div class="flex-grow">
                            <!-- üìù T√äN KH√ìA H·ªåC -->
                            <!-- "font-semibold text-lg" = Font n·ª≠a ƒë·∫≠m, size 18px -->
                            <!-- "text-gray-800" = M√†u x√°m ƒë·∫≠m -->
                            <!-- "dark:text-gray-200" = M√†u x√°m nh·∫°t ·ªü dark mode -->
                            <!-- ${item.name} = Hi·ªÉn th·ªã t√™n kh√≥a h·ªçc t·ª´ d·ªØ li·ªáu -->
                            <h3 class="font-semibold text-lg text-gray-800 dark:text-gray-200">${item.name}</h3>

                            <!-- üìö DANH M·ª§C KH√ìA H·ªåC -->
                            <!-- "text-sm" = Font size nh·ªè -->
                            <!-- "text-gray-600" = M√†u x√°m nh·∫°t -->
                            <!-- "dark:text-gray-400" = M√†u x√°m t·ªëi ·ªü dark mode -->
                            <!-- ${item.category || 'Course'} = Hi·ªÉn th·ªã danh m·ª•c, n·∫øu kh√¥ng c√≥ th√¨ "Course" -->
                            <p class="text-sm text-gray-600 dark:text-gray-400">${item.category || 'Course'}</p>

                            <!-- ‚≠ê RATING S√ÅCH: Hi·ªÉn th·ªã sao v√† s·ªë review -->
                            <!-- "flex items-center mt-1" = X·∫øp theo h√†ng ngang, margin tr√™n 4px -->
                            <div class="flex items-center mt-1">
                                <!-- ‚≠ê 5 SAO: Hi·ªÉn th·ªã 5 icon sao -->
                                <!-- "flex text-yellow-400 text-sm" = X·∫øp 5 sao theo h√†ng, m√†u v√†ng, size nh·ªè -->
                                <!-- ${'<i class="fas fa-star"></i>'.repeat(5)} = L·∫∑p icon sao 5 l·∫ßn -->
                                <div class="flex text-yellow-400 text-sm">
                                    ${'<i class="fas fa-star"></i>'.repeat(5)}
                                </div>

                                <!-- üìä S·ªê REVIEW -->
                                <!-- "ml-2" = Margin tr√°i 0.5rem (8px) -->
                                <!-- "text-sm text-gray-500" = Font nh·ªè, m√†u x√°m -->
                                <span class="ml-2 text-sm text-gray-500">4.8 (2,500+ reviews)</span>
                            </div>
                        </div>

                        <!-- üí∞ GI√Å TI·ªÄN & N√öT X√ìA -->
                        <!-- "text-right" = Canh ph·∫£i -->
                        <div class="text-right">
                            <!-- üíµ GI√Å KH√ìA H·ªåC: S·ªë ti·ªÅn c·∫ßn thanh to√°n -->
                            <!-- "text-2xl" = Font size l·ªõn 24px -->
                            <!-- "font-bold" = Font weight 700 (ƒë·∫≠m) -->
                            <!-- "text-indigo-600" = M√†u xanh t√≠m -->
                            <!-- parseFloat(item.price).toFixed(2) = Chuy·ªÉn gi√° th√†nh s·ªë th·∫≠p ph√¢n 2 ch·ªØ s·ªë (v√≠ d·ª•: $99.99) -->
                            <p class="text-2xl font-bold text-indigo-600">$${parseFloat(item.price).toFixed(2)}</p>

                            <!-- üóëÔ∏è N√öT X√ìA ITEM: X√≥a kh√≥a h·ªçc kh·ªèi gi·ªè -->
                            <!-- "mt-2" = Margin tr√™n 0.5rem -->
                            <!-- "text-red-500" = M√†u ƒë·ªè -->
                            <!-- "hover:text-red-700" = M√†u ƒë·ªè ƒë·∫≠m h∆°n khi hover -->
                            <!-- "transition-colors" = Animation chuy·ªÉn m√†u m∆∞·ª£t -->
                            <!-- onclick="removeFromCart(${index})" = Khi click: g·ªçi h√†m removeFromCart v·ªõi index c·ªßa item -->
                            <button onclick="removeFromCart(${index})" class="remove-btn mt-2 text-red-500 hover:text-red-700 transition-colors">
                                <!-- üóëÔ∏è ICON TH√ôNG R√ÅC -->
                                <i class="fas fa-trash"></i> Remove
                            </button>
                        </div>
                    </div>
                `).join(''); <!-- .join('') = n·ªëi t·∫•t c·∫£ HTML th√†nh 1 string -->
            }

            <!-- üî¢ C·∫¨P NH·∫¨T S·ªê L∆Ø·ª¢NG: Hi·ªÉn th·ªã s·ªë item trong gi·ªè l√™n ti√™u ƒë·ªÅ -->
            document.getElementById('cart-count-display').textContent = cart.length;

            <!-- üîî C·∫¨P NH·∫¨T BADGE HEADER: Hi·ªÉn th·ªã s·ªë l∆∞·ª£ng ·ªü icon gi·ªè h√†ng trong header -->
            const headerCartCount = document.getElementById('cart-count'); <!-- L·∫•y element badge cart ·ªü header -->
            if (headerCartCount) { <!-- N·∫øu element t·ªìn t·∫°i -->
                if (cart.length > 0) {
                    headerCartCount.textContent = cart.length; <!-- Hi·ªÉn th·ªã s·ªë l∆∞·ª£ng -->
                    headerCartCount.classList.remove('hidden'); <!-- Lo·∫°i b·ªè class 'hidden' ƒë·ªÉ hi·ªÉn th·ªã -->
                } else {
                    headerCartCount.classList.add('hidden'); <!-- Th√™m class 'hidden' ƒë·ªÉ ·∫©n -->
                }
            }
        }

        <!-- üí∞ H√ÄM: T√≠nh t·ªïng ti·ªÅn v√† c·∫≠p nh·∫≠t giao di·ªán -->
        function updateSummary() {
            <!-- üî¢ T√çNH SUBTOTAL: C·ªông gi√° t·∫•t c·∫£ item trong gi·ªè -->
            <!-- reduce((sum, item) => sum + parseFloat(item.price), 0) = duy·ªát item, c·ªông gi√°, b·∫Øt ƒë·∫ßu t·ª´ 0 -->
            const subtotal = cart.reduce((sum, item) => sum + parseFloat(item.price), 0);

            <!-- üíµ T√çNH TOTAL: Hi·ªán t·∫°i tax = 0%, n√™n total = subtotal -->
            const total = subtotal;

            <!-- üìù C·∫¨P NH·∫¨T SUBTOTAL L√äN HTML: Hi·ªÉn th·ªã t·ªïng gi√° tr∆∞·ªõc thu·∫ø -->
            <!-- toFixed(2) = Gi·ªØ 2 ch·ªØ s·ªë th·∫≠p ph√¢n (v√≠ d·ª•: 99.99) -->
            document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;

            <!-- üìù C·∫¨P NH·∫¨T TOTAL L√äN HTML: Hi·ªÉn th·ªã t·ªïng c·ªông ph·∫£i thanh to√°n -->
            document.getElementById('total').textContent = `$${total.toFixed(2)}`;
        }

        <!-- üóëÔ∏è H√ÄM: X√≥a 1 item kh·ªèi gi·ªè h√†ng -->
        function removeFromCart(index) {
            <!-- üìç REMOVE: X√≥a item ·ªü v·ªã tr√≠ 'index' (ch·ªâ x√≥a 1 item) -->
            <!-- splice(index, 1) = x√≥a 1 ph·∫ßn t·ª≠ b·∫Øt ƒë·∫ßu t·ª´ v·ªã tr√≠ index -->
            cart.splice(index, 1);

            <!-- üíæ L∆ØU: C·∫≠p nh·∫≠t d·ªØ li·ªáu v√†o localStorage -->
            saveCart();

            <!-- üé® RENDER L·∫†I: C·∫≠p nh·∫≠t giao di·ªán -->
            renderCart();
            updateSummary();
        }

        <!-- üîó EVENT: Khi click n√∫t "Proceed to Checkout" -->
        document.getElementById('checkout-btn').addEventListener('click', function() {
            <!-- üîç KI·ªÇM TRA: N·∫øu gi·ªè tr·ªëng, kh√¥ng l√†m g√¨ -->
            if (cart.length === 0) return;

            <!-- üìù TH√îNG B√ÅO: Hi·ªÉn th·ªã alert cho user -->
            <!-- cart.length = s·ªë l∆∞·ª£ng kh√≥a h·ªçc trong gi·ªè -->
            alert('Proceeding to checkout with ' + cart.length + ' course(s)');

            <!-- üîó CHUY·ªÇN TRANG: ƒêi t·ªõi trang payment ƒë·ªÉ thanh to√°n -->
            window.location.href = '/payment';
        });

        <!-- ‚è∞ EVENT: Khi trang load xong (DOM s·∫µn s√†ng) -->
        document.addEventListener('DOMContentLoaded', function() {
            <!-- üì• LOAD GI·ªé H√ÄNG: T·∫£i d·ªØ li·ªáu gi·ªè h√†ng t·ª´ localStorage -->
            loadCart();

            <!-- üë§ C·∫§P NH·∫¨T AVATAR: Hi·ªÉn th·ªã avatar ng∆∞·ªùi d√πng ·ªü header -->
            <!-- üíæ L·∫•y th√¥ng tin user t·ª´ localStorage -->
            const user = JSON.parse(localStorage.getItem('user'));

            <!-- üé® N·∫øu c√≥ user: hi·ªÉn th·ªã avatar (ch·ªØ c√°i ƒë·∫ßu c·ªßa t√™n) -->
            if (user) {
                const userAvatar = document.getElementById('user-avatar');
                if (userAvatar) {
                    <!-- üìù L·∫•y ch·ªØ c√°i ƒë·∫ßu c·ªßa m·ªói t·ª´ trong t√™n user -->
                    <!-- user.name.split(' ') = t√°ch t√™n th√†nh m·∫£ng c√°c t·ª´ -->
                    <!-- .map(n => n[0]) = l·∫•y ch·ªØ c√°i ƒë·∫ßu c·ªßa m·ªói t·ª´ -->
                    <!-- .join('').toUpperCase() = n·ªëi l·∫°i v√† convert th√†nh ch·ªØ hoa -->
                    const initials = user.name ? user.name.split(' ').map(n => n[0]).join('').toUpperCase() : 'U';
                    userAvatar.textContent = initials;
                }
            }

            <!-- üö™ EVENT: Khi click n√∫t "Logout" ·ªü header -->
            const logoutBtn = document.getElementById('logout-button');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', () => {
                    <!-- üóëÔ∏è X√ìA D·ªÆ LI·ªÜU: X√≥a to√†n b·ªô d·ªØ li·ªáu l∆∞u (user, cart...) -->
                    localStorage.clear();

                    <!-- üîó CHUY·ªÇN TRANG: V·ªÅ l·∫°i trang login -->
                    window.location.href = '/login';
                });
            }

            <!-- üë§ EVENT: Khi click avatar ‚Üí ƒëi t·ªõi trang profile -->
            const userMenuBtn = document.getElementById('user-menu-button');
            if (userMenuBtn) {
                userMenuBtn.addEventListener('click', () => {
                    <!-- üîó CHUY·ªÇN TRANG: ƒêi t·ªõi profile page -->
                    window.location.href = '/profile';
                });
            }
        });
    </script>
</body>
</html>
